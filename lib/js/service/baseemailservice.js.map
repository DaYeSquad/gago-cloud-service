{"version":3,"sources":["../src/service/baseemailservice.ts"],"names":[],"mappings":";;;;;;;;;AAGA,MAAM,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAErD,yBAAqB,UAAU,CAAC,CAAA;AAKhC;IAKE,OAAa,aAAa,CAAC,SAAiB,EAAE,SAAiB,EAAE,OAAe,EAAE,QAAgB;;YAChG,MAAM,CAAC,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM;gBACzC,IAAI,GAAG,GAAQ,IAAI,iBAAiB,CAAC;oBACnC,UAAU,EAAE,eAAM,CAAC,SAAS;oBAC5B,WAAW,EAAE,eAAM,CAAC,aAAa;iBAClC,CAAC,CAAC;gBACH,GAAG,CAAC,cAAc,CAAC,kBAAkB,EAAE,IAAI,EAAE,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,KAAU,EAAE,GAAQ;oBACvH,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACV,MAAM,CAAC,KAAK,CAAC,CAAC;oBAChB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC5B,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;AACH,CAAC;AApBY,wBAAgB,mBAoB5B,CAAA","file":"baseemailservice.js","sourcesContent":["// Copyright 2016 Frank Lin (lin.xiaoe.f@gmail.com). All rights reserved.\n// Use of this source code is governed a license that can be found in the LICENSE file.\n\nconst DirectMailService = require('node-aliyun-dms');\n\nimport {Aliyun} from \"./aliyun\";\n\n/**\n * Sending single or batch emails from aliyun.\n */\nexport class BaseEmailService {\n\n  /**\n   * Sends HTML email and returns request id.\n   */\n  static async sendHtmlEmail(toAddress: string, fromAlias: string, subject: string, htmlBody: string): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      let dms: any = new DirectMailService({\n        'accessid': Aliyun.ACCESS_ID,\n        'accesskey': Aliyun.ACCESS_SECRET\n      });\n      dms.sendSingleMail('gago@gagodata.cn', true, 0, toAddress, fromAlias, subject, htmlBody, undefined, (error: any, res: any) => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(res['RequestId']);\n        }\n      });\n    });\n  }\n}\n"]}